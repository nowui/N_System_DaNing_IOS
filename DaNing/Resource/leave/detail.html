<!DOCTYPE html>
<html>

<head>
    <title>上海市闸北区大宁国际学校</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="format-detection"content="telephone=no, email=no" />
    <link rel="stylesheet" href="/css/ionic.min.css">
    <link rel="stylesheet" href="/css/mobiscroll.custom-2.17.1.min.css">
    <link rel="stylesheet" href="/css/app.css">
    <script src="/js/ionic.bundle.min.js"></script>
    <script src="/js/angular-cookies.js"></script>
    <script src="/js/taggedInfiniteScroll.min.js"></script>
    <script src="/js/zepto.min.js"></script>
    <script src="/js/mobiscroll.custom-2.17.1.min.js"></script>
    <script src="/js/app.js"></script>
</head>

<body ng-app="App" ng-controller="Controller">
	<ion-list>
		<ion-item class="item-icon-right" ng-click="clickType();">
			请假类型
			<div style="display:none;">
			<select id="type" ng-model="leave.type">
    			<option value="SJ">事假</option>
			    <option value="BJ">病假</option>
			    <option value="NJ">年假</option>
			    <option value="TX">调休</option>
			    <option value="HJ">婚假</option>
			    <option value="CJ">产假</option>
			</select>
			</div>
			<span class="item-note">{{leave.type}}</span>
			<i class="icon material-icons item-note">&#xe5cc;</i>
		</ion-item>
		<ion-item class="item-icon-right" ng-click="clickStart();" style="margin-top:10px;">
			开始日期<input id="start" style="display:none;" ng-model="leave.starTime" />
			<span class="item-note">{{leave.starTime}}</span>
			<i class="icon material-icons item-note">&#xe5cc;</i>
		</ion-item>
		<ion-item class="item-icon-right" ng-click="clickEnd();">
			结束日期<input id="end" style="display:none;" ng-model="leave.endTime" />
			<span class="item-note">{{leave.endTime}}</span>
			<i class="icon material-icons item-note">&#xe5cc;</i>
		</ion-item>
		<ion-item style="margin-top:10px;">
			<div style="position:absolute;">请假理由</div>
			<div style="padding-left:80px;">
				<textarea class="am-form-field" rows="3" style="width:100%; font-size:14px;" ng-model="leave.content"></textarea>
			</div>
		</ion-item>
	</ion-list>
</body>

</html>
<script>
(function() {
var app = angular.module("App", ["ionic", "ngCookies", "tagged.directives.infiniteScroll"])
    .controller('Controller', function($scope, $http, $ionicLoading, $timeout, $cookieStore) {
    	var userId = $cookieStore.get(CookieUserId);
    	$scope.leave = {};

        if(isApp) {
			window.location.href = "webviewplus://" + encodeURIComponent("{\"action\":\"" + ActionSetTitle + "\",\"data\":{\"text\":\"我的请假\"}}");
		}

		$('#type').mobiscroll().select({
	        theme: 'ios',
	        lang: 'zh',
	        display: 'bottom'
	    });

	    $('#type').hide();

		$('#start').mobiscroll().date({
	        theme: 'ios',
	        lang: 'zh',
	        dateFormat: 'yyyy-mm-dd',
	        display: 'bottom'
	    });

		$('#end').mobiscroll().date({
	        theme: 'ios',
	        lang: 'zh',
	        dateFormat: 'yyyy-mm-dd',
	        display: 'bottom'
	    });

		$scope.clickType = function() {
			$('#type').mobiscroll('show');
		}

		$scope.clickStart = function() {
			$('#start').mobiscroll('show');
		}

		$scope.clickEnd = function() {
			$('#end').mobiscroll('show');
		}

		$scope.formatType = function(val) {
			console.log(val);
		    if (val == "SJ") {
		        return "事假";
		    } else if (val == "BJ") {
		        return "病假";
		    } else if (val == "HJ") {
		        return "婚假";
		    } else if (val == "CJ") {
		        return "产假";
		    }
		}
	});
})();
</script>
